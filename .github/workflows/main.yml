name: 'Continuous Delivery'
on: [push]

jobs:
  Release-to-Roblox:
    runs-on: windows-latest
    steps:
    - name: Install Rust
      uses: actions-rs/toolchain@v1
      with:
        toolchain: stable

    - name: Install Rojo
      uses: actions-rs/cargo@v1
      with:
        command: install
        args: rojo --version ^6

    - name: Build project
      shell: bash
      run: rojo build -o build.rbxl

    - name: Upload to Roblox
      uses: tenx29/save-to-roblox@v1-prerelease
      with:
        api-key: ${{ secrets.ROBLOX_API_KEY }}
        universe-id: 4517238963
        place-id: 12909373856
        place-file: build.rbxl
        version-type: Published
